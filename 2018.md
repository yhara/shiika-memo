## 2018/02/24

### Signature of closures?

```
f = fn(x){ x + 1 }
```

What is "type" and/or "signature" of f?

## 2018/02/23

### Type vs. Signature

- What is "signature"?
  - Is it a type or not?
- eg. In Haskell:
  - Every value belongs to a type
  - Functions are values
  - So each function belongs to a type such as `f :: Int -> Int`
  - Application `f "foo"` is a type error
- In Shiika, methods are not first-class value
  - But off course, we want to check type errors for method calls
  - There should be information of what a method takes and returns (= Signature)

## 2018/02/20

### Funcion call or variable reference

```rb
  def do_task(after: () -> Void)
    # do something

    # This may look like a function call, but...
    after

    # There's a case that passing `after` to another function,
    # so `after` should be a variable reference.
    do_task_2(after)

    # Allow this?
    after()

    # How about these?
    another()  # Call of another method
    another    # Allow this or prohibit this?
  end

  def another
  end
```

## 2018/02/19

### Nullary-function problem

- Ruby's `Proc` is like function but has different syntax to invoke

```rb
def foo(*args); end
bar = Proc.new

foo  # Method call
bar  # Variable reference
foo(1)  # Method call
bar(1)  # *Error*
bar.call(1)  # OK

bar[1]       # Alternative syntax of call (`#[]` is an alias of `#call`)
bar.(1)      # Alternative syntax of call (rarely used, though)
```

Note that you need to write `bar.call` to invoke the function with 0 arguments.

## 2018/02/18

### Function type?

- Swift has function as first-class value
  - But there is no class for function?
  - https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/Types.html#//apple_ref/swift/grammar/function-type
  - Functions and tuples look like special in Swift
- Scala has function as first-class value
  - They are instances of `Function0` ã€œ `Function22`
  - With syntax sugar `f(x)` = `f.apply(x)`
  - Method, on the other hand, is not a first-class value
- Ruby has no "function"
  - But has `Proc` class instead
  - Ruby also has `Method` class (not so popular as `Proc`)

## 2018/02/17

### Data structure for types

- What object should `env.find_type` return?
  - It should be able to tell an object conforms (= its class conforms) to the type

### Type syntax

- Types can be appeared in some place of a program
  - Function signature (params, return value)
  - Instance variable type
  - Cast
- Type syntax
  - Class name (non-generic)
    - => An instance of the class or its subclasses
  - Class name (generic)
    - => Illegal (type argument required)
  - Generic class name + type arguments
    - eg. `Stack[Int]`
    - => Instance of the class
    - (This will change once covariance/contravariance are introduced)
  - Type parameter name
    - => An instance of the class Object or its subclasses
    - (Once upper/lower bounds are introduced, instance of a class between the bound)

## 2018/02/16

### What is type

- Given `x: Foo`, x is an instance of Foo or its subclasses
  - Type = set of classes
- `x: Array` is not allowed (missing type argument)
  - Shiika needs a definition of type syntax

### Is `Stack[Int]` a class?

No?

### Generics

Thinking about generics since the new year. Shiika won't have even the class Array without it.

Notes:

- Use `[]` for generics syntax
- Reason1: `<>` is not suitable when `<:` and `>:` are introduced to denote upper/lower bound
  - Swift uses `:` to denote upper bound (No syntax for lower bound)
- Reason2: `Stack[T]` looks like a method call :-)
  - Can we define this as method call?
  - `Stack#[]` to return specialized class

## 2018/02/15

### MetaClass

- In Ruby, `Array` evaluates to an object (an instance of the `Class` class)
- In Shiika too?
- But `Array.new` and `String.new` have different signature
  - In Ruby, `new` is their "singleton method" so they can behave
    differently even the name is the same
- No plan to introduce "singleton method" to Shiika
- MetaClass
  - `Array` evaluates to an object
  - Its class is `Meta:Array` (metaclass of Array)
  - `new` is defined on `Meta:Array`

### Shiika

- Static typing
- Ruby-like syntax
  - But not 100% compatible
- Interpreter is written in Ruby (for now)
  - Future plan: compile to LLVM IR (using Go or something?)
- Challenge
  - Rubyish + Static type system

### shiika-memo

Notes for https://github.com/yhara/shiika .
